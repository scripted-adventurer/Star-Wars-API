(this.webpackJsonpstar_wars_api=this.webpackJsonpstar_wars_api||[]).push([[0],{15:function(t,e,s){},16:function(t,e,s){},17:function(t,e,s){},18:function(t,e,s){"use strict";s.r(e);var a=s(0),i=s(1),n=s.n(i),r=s(9),o=s.n(r),l=(s(15),s(2)),h=s(3),c=s(4),p=s(5),d=s(7),u=s(6),j=(s(16),function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(h.a)(this,s),(a=e.call(this,t)).state={visible:!0},a}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"setTimer",value:function(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){this.setState({visible:!1})}.bind(this),5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){return this.state.visible?Object(a.jsxs)("div",{className:"error-message",children:["ERROR",Object(a.jsx)("br",{}),this.props.message]}):null}}]),s}(n.a.Component)),m=(s(17),function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(h.a)(this,s),(i=e.call(this,t)).state={error:null,downloadStarships:!1,downloadPilots:!1,loadPilotNames:!1,starshipName:null,starshipDropdown:null,pilotNameRows:Object(a.jsx)("tr",{children:Object(a.jsx)("td",{children:"Loading..."})})},i.nextUrl="https://swapi.dev/api/starships/",i.starshipData={},i.pilotUrls=new Set,i.pilotInfo={},i.selectStarshipName=i.selectStarshipName.bind(Object(p.a)(i)),i}return Object(c.a)(s,[{key:"getStarships",value:function(){var t=this;null!=this.nextUrl&&fetch(this.nextUrl).then((function(t){return t.json()})).then((function(e){var s,a=Object(l.a)(e.results);try{for(a.s();!(s=a.n()).done;){var i=s.value;t.starshipData[i.name]=i.pilots;var n,r=Object(l.a)(i.pilots);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.pilotUrls.add(o)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){a.e(h)}finally{a.f()}t.nextUrl=e.next,null!=t.nextUrl?t.setState({downloadStarships:!0}):t.setState({downloadStarships:!1,downloadPilots:!0})}),(function(e){t.setState({error:e.message,downloadStarships:!1})}))}},{key:"getPilotNames",value:function(){var t,e=this,s=this.pilotUrls.values(),a=Object(l.a)(s);try{var i=function(){var s=t.value;fetch(s).then((function(t){return t.json()})).then((function(t){e.pilotInfo[s]=t.name,e.pilotUrls.delete(s),0===e.pilotUrls.size&&e.setState({downloadPilots:!1})}),(function(t){e.setState({error:t.message,downloadPilots:!1}),e.pilotInfo[s]="Unknown",e.pilotUrls.delete(s)}))};for(a.s();!(t=a.n()).done;)i()}catch(n){a.e(n)}finally{a.f()}}},{key:"updatePilotInfo",value:function(){for(var t=0,e=Object.values(this.starshipData);t<e.length;t++)for(var s=e[t],a=0;a<s.length;a++){var i=s[a],n=this.pilotInfo[i];s[a]=n}}},{key:"loadStarshipDropdown",value:function(){for(var t=[],e=0,s=Object.keys(this.starshipData);e<s.length;e++){var i=s[e];t.push(Object(a.jsx)("option",{value:i,children:i},i))}this.setState({starshipDropdown:t,pilotNameRows:null})}},{key:"selectStarshipName",value:function(t){var e=t.target.value;this.setState({starshipName:e,loadPilotNames:!0})}},{key:"loadPilotNames",value:function(){var t=[];0===this.starshipData[this.state.starshipName].length&&t.push(Object(a.jsx)("tr",{children:Object(a.jsx)("td",{children:"No pilots found!"})},"1"));var e,s=Object(l.a)(this.starshipData[this.state.starshipName]);try{for(s.s();!(e=s.n()).done;){var i=e.value;t.push(Object(a.jsx)("tr",{children:Object(a.jsx)("td",{children:i})},i))}}catch(n){s.e(n)}finally{s.f()}this.setState({pilotNameRows:t,loadPilotNames:!1})}},{key:"componentDidMount",value:function(){this.getStarships()}},{key:"componentDidUpdate",value:function(){this.state.downloadStarships&&this.getStarships(),this.state.downloadPilots&&this.getPilotNames(),0===this.pilotUrls.size&&null===this.state.starshipDropdown&&(this.updatePilotInfo(),this.loadStarshipDropdown()),this.state.loadPilotNames&&this.loadPilotNames()}},{key:"render",value:function(){return Object(a.jsxs)(n.a.Fragment,{children:[Object(a.jsx)("p",{className:"title",children:"Star Wars Starship Pilots"}),Object(a.jsx)("form",{className:"starship-select",children:Object(a.jsx)("p",{children:Object(a.jsxs)("label",{htmlFor:"starshipName",children:["Starship:\xa0",Object(a.jsxs)("select",{id:"starshipName",name:"starshipName",onChange:this.selectStarshipName,children:[Object(a.jsx)("option",{value:""},""),this.state.starshipDropdown]})]})})}),Object(a.jsx)("table",{id:"pilot-table",children:Object(a.jsx)("tbody",{children:this.state.pilotNameRows})}),this.state.error&&Object(a.jsx)(j,{message:this.state.error})]})}}]),s}(n.a.Component));o.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(m,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.55ed1322.chunk.js.map